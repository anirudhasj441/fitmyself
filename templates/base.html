<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <!-- Font Awsome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <title>{% block title %}{% endblock title %}</title>

    <!-- Custom CSS  -->
    <style>
        .navbar-bg {
            background-color: #242526;

        }

        /* .navbar-bg::before{
            position: relative;
            background-color: white;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0.7;
            z-index: 33;
        } */

        .navbar-link {
            color: white !important;
            font-weight: bold !important;
        }

        .nav-active {
            background-color: #3a3b3c;
        }

        .navbar-link:hover {
            /* color: #d00000 !important; */
            background-color: #3a3b3c !important;
            font-weight: bold !;
        }

        .logo {
            outline: none !important;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: max-content;
        }

        .logo input {
            background-color: #3a3b3c;
            border: none;
            outline: none !important;
        }

        .nav-tog i {
            border: none !important;
            outline: none !important;

        }

        .nav-tog:hover {
            border: none !important;
            color: #d00000 !important;
        }

        .nav-tog:focus {
            outline: none !important;
            border: none !important;
        }

        .no-outline:focus {
            background-color: #3a3b3c;
            border: none;
            outline: none !important;
        }

        #search-form {
            width: max-content;
        }

        #mess {
            position: fixed;
            left: 0;
            width: 100%;
        }

        #main-nav {
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
            /* width: auto; */
        }

        #secondary-nav {
            width: max-content;
        }

        #secondary-nav li {
            margin: 0 2px;
        }

        .icon {
            margin: 0 2px;
            height: 28px;
            width: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 575.98px) {

            /* #search-form{
                display: none;
            } */
            #main-nav {
                margin-left: 0 !important;
                width: 100%;
            }

            .basic-nav {
                display: none;
            }
        }

        @media (max-width: 767.98px) {
            #main-nav {
                margin-left: 0 !important;
                width: 100%;
            }
        }

        .profile-name:hover {
            background-color: #3a3b3c;
        }

        .basic-nav {
            color: white;
            background-color: #3a3b3c;
        }

        .basic-nav:hover {
            background-color: #18191a;
        }

        .dropdown-menu-dark {
            left: auto;
            right: 0;
        }

        .dropdown-menu-dark li a {
            display: flex;
            align-items: center;
            min-height: 44px;
            padding: auto 0;
        }

        #search-result{
            width: 300px;
            position: absolute;
            left: 0;
            right: auto;
            top: 0;
            display: none;
        }

        /* @media max-width(); */
        /* // X-Small devices (portrait phones, less than 576px)
        @media (max-width: 575.98px) { ... }

        // Small devices (landscape phones, less than 768px)
        @media (max-width: 767.98px) { ... }

        // Medium devices (tablets, less than 992px)
        @media (max-width: 991.98px) { ... }

        // Large devices (desktops, less than 1200px)
        @media (max-width: 1199.98px) { ... }

        // X-Large devices (large desktops, less than 1400px)
        @media (max-width: 1399.98px) { ... }

        // XX-Large devices (larger desktops)
        // No media query since the xxl breakpoint has no upper bound on its width */
    </style>

    {% block css %}
    {% endblock css %}

</head>

<body style="background-color: #1c1e21;">
    <nav class="navbar p-0 navbar-expand-lg fixed-top navbar-dark navbar-bg" id="navbar">
        <div class="container-fluid">
            {% load static %}
            <div class="logo">
                <a class="navbar-brand text-right" href="/"><img src="{% static 'images/logo.png' %}" width="40px"
                        alt="logo"></a>
                <form id="search-form" method="get">
                    <input class="no-outline text-light outline-none form-control rounded-pill me-2" id="search" onchange="search();" type="text" placeholder="&#xF002; Search FitMySelf" style="font-family:Arial, FontAwesome" aria-label="Search">
                    <!-- <button class="btn btn-outline-success" type="submit">Search</button> -->
                </form>
            </div>
            <button class="navbar-toggler nav-tog" style="outline: none; border: none;" type="button"
                data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa fa-bars" style="outline: none;"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mb-2 mb-lg-0" id="main-nav">
                    <li class="nav-item">
                        <a href="/" class="navbar-link rounded nav-link {% if request.get_full_path == '/' %} nav-active {% endif %}">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="/workout" class="navbar-link rounded nav-link {% if request.get_full_path == '/workout/' %} nav-active {% endif %}">Workouts</a>
                    </li>
                    <li class="nav-item">
                        <a href="/calculator/bmi_calculator" class="navbar-link rounded nav-link {% if request.get_full_path == '/calculator/bmi_calculator' %} nav-active {% endif %}">BMI</a>
                    </li>
                    <li class="nav-item">
                        <a href="/calculator/bmr_calculator" class="navbar-link rounded nav-link {% if request.get_full_path == '/calculator/bmr_calculator' %} nav-active {% endif %}">BMR</a>
                    </li>
                </ul>
                {% if request.user.is_authenticated %}
                <ul class="navbar-nav mb-2 mb-lg-0" id="secondary-nav" onresize="changeSize()">
                    {% load extras %}
                    <li class="nav-item rounded-pill px-2 profile-name {% if request.get_full_path == '/'|addstr:request.user.slug %}nav-active{% endif %}" style="width: max-content;">
                        <div class="d-flex my-auto h-100  justify-content-between align-items-center">
                            <span class="icon rounded-circle bg-light">
                                <img src="{% if user_profile %}{{media}}{{user_profile.display_picture}}{% else %}{% static 'images/user.svg' %}{% endif %}"
                                    class="rounded-circle" style="width: 100%; height: 100%;" alt="">
                            </span>
                            <a href="/{{user.slug}}" class="nav-link py-0" style="font-size: .9375rem; font-weight: 600;">
                                {{request.user.first_name}}
                            </a>
                        </div>
                    </li>                     
                    <li class="nav-item">
                        <span class="icon w-100 h-100 basic-nav rounded-circle">
                            <a href="#" class="nav-link">
                                <img src="{% static 'images/plus.svg' %}" class="w-100 h-100" alt="">
                            </a>
                        </span>
                    </li>
                    <li class="nav-item dropdown">
                        <span class="icon w-100 h-100 basic-nav rounded-circle">
                            <a class="nav-link" href="#" id="notificationDropdown" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="{% static 'images/bell.svg' %}" style="width: 100%; height: 100%;" alt="">
                            </a>
                            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="notificationDropdown">
                                <li><a class="dropdown-item" href="#">Action</a></li>
                                <li><a class="dropdown-item" href="#">Another action</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#">Something else here</a></li>
                            </ul>
                        </span>
                    </li>
                    <li class="nav-item">
                        <span class="dropdown icon w-100 h-100 basic-nav rounded-circle">
                            <a class="nav-link" id="profileDropdown" href="#" role="button" id="profileDropdown"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="{% static 'images/chevron-down.svg' %}" style="width: 100%; height: 100%;"
                                    alt="">
                            </a>
                            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="profileDropdown">
                                <li>
                                    <a class="dropdown-item" href="/{{user.slug}}">
                                        <span class="icon rounded-circle bg-light" style="width: 60px; height: 60px;">
                                            <img src="{% if user_profile %}{{media}}{{user_profile.display_picture}}{% else %}{% static 'images/user.svg' %}{% endif %}"
                                                class="rounded-circle" style="width: 100%; height: 100%;" alt="">
                                        </span>
                                        <span class="mx-3">
                                            <h3 style="font-size: 1.0625rem;" class="m-0">
                                                {{request.user.first_name}} {{request.user.last_name}}
                                            </h3>
                                            <p style="font-size: .9375rem;" class="m-0">See Your Profile</p>
                                        </span>
                                    </a>
                                </li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li>
                                    <a href="/calculator/bmi_calculator" class="dropdown-item">
                                        {% load humanize %}
                                        <span>BMI</span>
                                        <span style="margin-left: auto;">
                                            <p class="m-0" style="font-size: 1.0rem;text-align: right;">{% if bmi %}{{bmi.bmi}} kg/m<sup>2</sup>{% else %}Not Calculate{% endif %}</p>
                                            <p class="m-0" style="font-size: 0.8rem;text-align: right;">{% if bmi %}{{bmi.date_filled|naturaltime}}{% else %}Not Calculate{% endif %}</p>   
                                        </span>
                                    </a>
                                </li>
                                <li>
                                    <a href="/calculator/bmr_calculator" class="dropdown-item">
                                        <span>BMR</span>
                                        <span style="margin-left: auto;">
                                            <p class="m-0" style="font-size: 1.0rem; text-align: right;">{% if bmr %}{{bmr.bmr}} cal/day{% else %}Not Calculate{% endif %}</p>
                                            <p class="m-0 text-left" style="font-size: 0.8rem; text-align: right;">{% if bmr %}{{bmr.date_filled|naturaltime}}{% else %}Not Calculate{% endif %}</p>   
                                        </span>
                                    </a>
                                </li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="/workout">Workouts</a></li>
                                <li><a class="dropdown-item" href="/workout/add_workout">Add Workout</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li>
                                    <a href="/logout" class="dropdown-item"><i class="fa fa-2x fa-sign-out mr-2"></i>
                                        Log out</a>
                                </li>
                            </ul>
                        </span>
                    </li>
                </ul>
                {% else %}
                <ul class="navbar-nav mb-2 mb-lg-0" style="margin-left: auto;width: auto;" id="secondary-nav">
                    <li class="nav-item">
                        <a href="/signup" class="nav-link navbar-link">Sign Up</a>
                    </li>
                    <li class="nav-item">
                        <a href="/signin" class="nav-link navbar-link">Sign In</a>
                    </li>
                </ul>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- Search result -->
    <ul id="search-result" class="bg-dark dropdown-menu-dark">
        <li class="dropdown-item">Hello</li>
        <li class="dropdown-item">Hello</li>
        <li class="dropdown-item">Hello</li>
    </ul>

    <!-- Message Alerts -->
    {% for message in messages %}
    <div class="alert alert-{{message.tags}} alert-dismissible fade show" role="alert" id="mess">
        <strong>{{message}}</strong>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}

    {% block body %}
    {% endblock body %}
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
    -->

    <!-- Custom Javascript -->
    <script>
        var h = (document.getElementById("navbar").offsetHeight) + "px";
        document.getElementById("mess").style.top = h;
    </script>
    <script>
        function changeSize() {
            var w = parseFloat(document.getElementById("navbarSupportedContent").offsetWidth) - parseFloat(document.getElementById(id = "secondary-nav").offsetWidth);
            console.log(w + "px");
            document.getElementById("main-nav").style.width = w + "px";
        }
        changeSize();
        window.addEventListener("resize", changeSize)
    </script>

    <script>
            // Example starter JavaScript for disabling form submissions if there are invalid fields
            (function () {
                'use strict'

                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.querySelectorAll('.needs-validation')

                // Loop over them and prevent submission
                Array.prototype.slice.call(forms)
                    .forEach(function (form) {
                        form.addEventListener('submit', function (event) {
                            if (!form.checkValidity()) {
                                event.preventDefault()
                                event.stopPropagation()
                            }

                            form.classList.add('was-validated')
                        }, false)
                    })
            })()
    </script>
    <script>
        function search(){
            document.getElementById('search-result').style.display = 'initial';
            console.log("here");
        }
    </script>

    <script>
        var h = (document.getElementById("navbar").offsetHeight) + "px";
        document.getElementById("search-result").style.top = h;
    </script>

    {% block script %}
    {% endblock script %}

</body>

</html>